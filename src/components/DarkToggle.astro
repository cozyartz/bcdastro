---
// No props
import { useEffect, useState } from 'react';

const [dark, setDark] = useState(false);

useEffect(() => {
  const root = document.documentElement;
  const initial = localStorage.getItem('theme');
  if (initial === 'dark') {
    root.classList.add('dark');
    setDark(true);
  }
}, []);

const toggle = () => {
  const root = document.documentElement;
  if (dark) {
    root.classList.remove('dark');
    localStorage.setItem('theme', 'light');
  } else {
    root.classList.add('dark');
    localStorage.setItem('theme', 'dark');
  }
  setDark(!dark);
};
---

<button
  onClick={toggle}
  class="transition-all duration-300 rounded-full p-2 bg-gray-800 hover:bg-gray-700 shadow hover:shadow-lg"
  aria-label="Toggle Dark Mode"
>
  {dark ? (
    <svg class="w-6 h-6 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
      <path
        d="M10 2a1 1 0 011 1v1a1 1 0 01-2 0V3a1 1 0 011-1zm4.22 2.22a1 1 0 011.42 1.42L15.41 6a1 1 0 11-1.42-1.42l.23-.23zM18 9a1 1 0 100 2h-1a1 1 0 100-2h1zM6 4.59a1 1 0 00-1.42-1.42l-.23.23A1 1 0 005.59 6l.23-.23A1 1 0 006 4.59zM3 9a1 1 0 100 2H2a1 1 0 100-2h1zm1.78 4.78a1 1 0 001.42 0l.23-.23A1 1 0 006 13.41l-.23.23a1 1 0 000 1.42zm4.22 2.22a1 1 0 102 0v-1a1 1 0 10-2 0v1zm4.22-1.78a1 1 0 011.42 0l.23.23A1 1 0 0015.41 14l-.23-.23a1 1 0 010-1.42z"
      />
    </svg>
  ) : (
    <svg class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
      <path
        d="M17.293 13.293a8 8 0 01-10.586-10.586 8.001 8.001 0 1010.586 10.586z"
      />
    </svg>
  )}
</button>
